!function(e,t,n,i,r){var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o="function"==typeof s.parcelRequire5559&&s.parcelRequire5559,d=o.cache||{},a="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function u(t,n){if(!d[t]){if(!e[t]){var i="function"==typeof s.parcelRequire5559&&s.parcelRequire5559;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(a&&"string"==typeof t)return a(t);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}l.resolve=function(n){var i=e[t][1][n];return null!=i?i:n},l.cache={};var c=d[t]=new u.Module(t);e[t][0].call(c.exports,l,c,c.exports,this)}return d[t].exports;function l(e){var t=l.resolve(e);return!1===t?{}:u(t)}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=d,u.parent=o,u.register=function(t,n){e[t]=[function(e,t){t.exports=n},{}]},Object.defineProperty(u,"root",{get:function(){return s.parcelRequire5559}}),s.parcelRequire5559=u;for(var c=0;c<t.length;c++)u(t[c])}({iSVN1:[function(e,t,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(n);var r=e("eventemitter3"),s=i.interopDefault(r),o=e("@solana/web3.js"),d=e("bs58"),a=i.interopDefault(d),u=function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{a(i.next(e))}catch(e){s(e)}}function d(e){try{a(i.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,d)}a((i=i.apply(e,t||[])).next())}))};class c extends s.default{constructor(e,t){if(super(),this._network=t,this._publicKey=null,this._popup=null,this._handlerAdded=!1,this._nextRequestId=1,this._autoApprove=!1,this._responsePromises=new Map,this.handleMessage=e=>{var t;if(this._injectedProvider&&e.source===window||e.origin===(null===(t=this._providerUrl)||void 0===t?void 0:t.origin)&&e.source===this._popup)if("connected"===e.data.method){const t=new(0,o.PublicKey)(e.data.params.publicKey);this._publicKey&&this._publicKey.equals(t)||(this._publicKey&&!this._publicKey.equals(t)&&this.handleDisconnect(),this._publicKey=t,this._autoApprove=!!e.data.params.autoApprove,this.emit("connect",this._publicKey))}else if("disconnected"===e.data.method)this.handleDisconnect();else if(e.data.result||e.data.error){const t=this._responsePromises.get(e.data.id);if(t){const[n,i]=t;e.data.result?n(e.data.result):i(new Error(e.data.error))}}},this._beforeUnload=()=>{this.disconnect()},function(e){return"object"==typeof e&&null!==e}(n=e)&&"postMessage"in n&&"function"==typeof n.postMessage)this._injectedProvider=e;else{if(!function(e){return"string"==typeof e}(e))throw new Error("provider parameter must be an injected provider or a URL string.");this._providerUrl=new URL(e),this._providerUrl.hash=new URLSearchParams({origin:window.location.origin,network:this._network}).toString()}var n}handleConnect(){var e;return this._handlerAdded||(this._handlerAdded=!0,window.addEventListener("message",this.handleMessage),window.addEventListener("beforeunload",this._beforeUnload)),this._injectedProvider?new Promise((e=>{this.sendRequest("connect",{}),e()})):(window.name="parent",this._popup=window.open(null===(e=this._providerUrl)||void 0===e?void 0:e.toString(),"_blank","location,resizable,width=460,height=675"),new Promise((e=>{this.once("connect",e)})))}handleDisconnect(){this._handlerAdded&&(this._handlerAdded=!1,window.removeEventListener("message",this.handleMessage),window.removeEventListener("beforeunload",this._beforeUnload)),this._publicKey&&(this._publicKey=null,this.emit("disconnect")),this._responsePromises.forEach((([,e],t)=>{this._responsePromises.delete(t),e(new Error("Wallet disconnected"))}))}sendRequest(e,t){return u(this,void 0,void 0,(function*(){if("connect"!==e&&!this.connected)throw new Error("Wallet not connected");const n=this._nextRequestId;return++this._nextRequestId,new Promise(((i,r)=>{var s,o,d,a;this._responsePromises.set(n,[i,r]),this._injectedProvider?this._injectedProvider.postMessage({jsonrpc:"2.0",id:n,method:e,params:Object.assign({network:this._network},t)}):(null===(s=this._popup)||void 0===s||s.postMessage({jsonrpc:"2.0",id:n,method:e,params:t},null!==(d=null===(o=this._providerUrl)||void 0===o?void 0:o.origin)&&void 0!==d?d:""),this.autoApprove||null===(a=this._popup)||void 0===a||a.focus())}))}))}get publicKey(){return this._publicKey}get connected(){return null!==this._publicKey}get autoApprove(){return this._autoApprove}connect(){return u(this,void 0,void 0,(function*(){this._popup&&this._popup.close(),yield this.handleConnect()}))}disconnect(){return u(this,void 0,void 0,(function*(){this._injectedProvider&&(yield this.sendRequest("disconnect",{})),this._popup&&this._popup.close(),this.handleDisconnect()}))}sign(e,t){return u(this,void 0,void 0,(function*(){if(!(e instanceof Uint8Array))throw new Error("Data must be an instance of Uint8Array");const n=yield this.sendRequest("sign",{data:e,display:t});return{signature:a.default.decode(n.signature),publicKey:new(0,o.PublicKey)(n.publicKey)}}))}signTransaction(e){return u(this,void 0,void 0,(function*(){const t=yield this.sendRequest("signTransaction",{message:a.default.encode(e.serializeMessage())}),n=a.default.decode(t.signature),i=new(0,o.PublicKey)(t.publicKey);return e.addSignature(i,n),e}))}signAllTransactions(e){return u(this,void 0,void 0,(function*(){const t=yield this.sendRequest("signAllTransactions",{messages:e.map((e=>a.default.encode(e.serializeMessage())))}),n=t.signatures.map((e=>a.default.decode(e))),i=new(0,o.PublicKey)(t.publicKey);return e=e.map(((e,t)=>(e.addSignature(i,n[t]),e)))}))}diffieHellman(e){return u(this,void 0,void 0,(function*(){if(!(e instanceof Uint8Array))throw new Error("Data must be an instance of Uint8Array");return yield this.sendRequest("diffieHellman",{publicKey:e})}))}}n.default=c},{eventemitter3:"f7let","@solana/web3.js":"eHxcm",bs58:"ac5iR","@parcel/transformer-js/src/esmodule-helpers.js":"19US5"}]},[]);
//# sourceMappingURL=esm.0c14d4a0.js.map
